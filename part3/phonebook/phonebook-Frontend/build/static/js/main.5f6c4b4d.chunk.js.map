{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","services/Contacts.js","components/Notification.js","App.js","index.js"],"names":["Filter","handler","onChange","PersonForm","NewContact","numberHandler","nameHandler","addHandler","value","name","number","type","onClick","Persons","NamesToShow","deleteContact","map","person","className","id","url","Contacts","getAll","axios","get","then","res","data","add","post","remove","delete","update","changedContact","put","Notification","message","style","color","App","useState","persons","setPersons","useEffect","contactService","Response","searchResult","setNewSearchResult","errorMessage","seterrorMessage","isSearching","setisSearching","newName","newNuber","setNewContact","Notify","msg","isError","setTimeout","event","query","target","result","filter","toLowerCase","includes","preventDefault","find","window","confirm","p","catch","err","response","error","updateContact","concat","contact","e","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.5f6c4b4d.chunk.js","sourcesContent":["import React from \"react\";\n\nconst Filter = ({ handler }) => (\n  <div>\n    filter shown with : <input onChange={handler} />\n  </div>\n);\nexport default Filter;\n","import React from \"react\";\n\nconst PersonForm = ({ NewContact, numberHandler, nameHandler, addHandler }) => (\n  <form>\n    <h2>add a new</h2>\n    <div>\n      name:\n      <input value={NewContact.name || \" \"} onChange={nameHandler} />\n    </div>\n    <div>\n      number:\n      <input value={NewContact.number || \" \"} onChange={numberHandler} />\n    </div>\n    <div>\n      <button type=\"submit\" onClick={addHandler}>\n        add\n      </button>\n    </div>\n  </form>\n);\n\nexport default PersonForm;\n","import React from \"react\";\n\nconst Persons = ({ NamesToShow, deleteContact }) => (\n  <div>\n    <h1>Numbers</h1>\n    <ul>\n      {NamesToShow.map((person) => (\n        <li className=\"note\" key={person.id}>\n          {person.name} {person.number}\n          <button onClick={() => deleteContact(person.id)}>delete</button>\n        </li>\n      ))}\n    </ul>\n  </div>\n);\n\nexport default Persons;\n","import axios from \"axios\";\n\nconst url = \"/api/persons\";\n\nconst getAll = () => {\n  return axios.get(url).then((res) => res.data);\n};\n\nconst add = (NewContact) => {\n  return axios.post(url, NewContact).then((res) => res.data);\n};\n\nconst remove = (id) => {\n  return axios.delete(url + `/${id}`).then((res) => res);\n};\n\nconst update = (id, changedContact) => {\n  return axios.put(url + `/${id}`, changedContact).then((res) => res.data);\n};\n\nconst Contacts = {\n  getAll,\n  add,\n  remove,\n  update\n};\n\nexport default Contacts;\n","const Notification = ({ message, color }) => {\n  const style = {\n    color\n  };\n  if (message === null) {\n    return null;\n  }\n\n  return (\n    <div style={style} className=\"error\">\n      {message}\n    </div>\n  );\n};\n\nexport default Notification;\n","import React, { useState, useEffect } from \"react\";\nimport Filter from \"./components/Filter.js\";\nimport PersonForm from \"./components/PersonForm.js\";\nimport Persons from \"./components/Persons.js\";\nimport contactService from \"./services/Contacts.js\";\nimport Notification from \"./components/Notification.js\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n\n  useEffect(() => {\n    contactService.getAll().then((Response) => {\n      setPersons(Response);\n    });\n  }, []);\n\n  const [searchResult, setNewSearchResult] = useState([]);\n  const [errorMessage, seterrorMessage] = useState({\n    errorMessage: null,\n    color: null\n  });\n  const [isSearching, setisSearching] = useState(false);\n  const [NewContact, setNewContact] = useState({\n    newName: \"\",\n    newNuber: \"\",\n    id: \"\"\n  });\n\n  // handlers\n  const HandleQueryChange = (event) => {\n    const query = event.target.value;\n    if (query) {\n      let result = persons.filter((person) =>\n        person.name.toLowerCase().includes(query.toLowerCase())\n      );\n      setisSearching(true);\n      setNewSearchResult(result);\n    } else {\n      setisSearching(false);\n    }\n  };\n\n  // controlling input fiels\n  const HandleNameChange = (event) => {\n    setNewContact({ name: event.target.value, number: NewContact.number });\n  };\n\n  const HandleNumberChange = (event) => {\n    setNewContact({ name: NewContact.name, number: event.target.value });\n  };\n\n  const deleteContact = (id) => {\n    const contact = persons.find((person) => person.id === id);\n    if (window.confirm(`Delete contact ${contact.name} ?`)) {\n      contactService\n        .remove(id)\n        .then((res) => {\n          Notify(`Deleted ${contact.name}`, false);\n        })\n        .catch((e) => {\n          Notify(\n            `Information of ${contact.name} has already been removed`,\n            true\n          );\n        });\n      setPersons(persons.filter((person) => person.id !== id));\n    }\n  };\n\n  // helper functions\n  const Notify = (msg, isError) => {\n    const color = isError ? \"red\" : \"green\";\n    seterrorMessage({ errorMessage: msg, color: color });\n\n    setTimeout(() => {\n      seterrorMessage({\n        errorMessage: null,\n        color: null\n      });\n    }, 5000);\n  };\n\n  const updateContact = (person) => {\n    if (\n      window.confirm(\n        `${NewContact.name} is already added to phonebook, replace the old number with the new one ?`\n      )\n    ) {\n      contactService\n        .update(person.id, NewContact)\n        .then((res) => {\n          seterrorMessage(`Changed ${NewContact.name}`);\n          setPersons(persons.map((p) => (p.id === person.id ? res : p)));\n          Notify(`changed ${NewContact.name}`, false);\n          setNewContact({ name: null, number: null });\n        })\n        .catch((err) => Notify(err.response.data.error, true));\n    }\n  };\n\n  const addContact = (event) => {\n    event.preventDefault();\n    const person = persons.find((person) => person.name === NewContact.name);\n\n    if (!person) {\n      contactService\n        .add(NewContact)\n        .then((res) => {\n          setPersons(persons.concat(res));\n          setNewContact({ name: null, number: null });\n          Notify(`Added ${NewContact.name}`, false);\n          setNewContact({ name: null, number: null });\n        })\n        .catch((err) => {\n          Notify(err.response.data.error, true);\n        });\n    } else {\n      updateContact(person);\n    }\n  };\n\n  const NamesToShow = isSearching ? searchResult : persons;\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification\n        message={errorMessage.errorMessage}\n        color={errorMessage.color}\n      />\n      <Filter handler={HandleQueryChange} />\n      <PersonForm\n        NewContact={NewContact}\n        nameHandler={HandleNameChange}\n        numberHandler={HandleNumberChange}\n        addHandler={addContact}\n      />\n      <Persons deleteContact={deleteContact} NamesToShow={NamesToShow} />\n    </div>\n  );\n};\n\nexport default App;\n","import ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./index.css\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}