(this.webpackJsonpapp1=this.webpackJsonpapp1||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var r=t(14),c=t.n(r),a=t(3),o=t(2),u=t(0),i=function(e){var n=e.handler;return Object(u.jsxs)("div",{children:["filter shown with : ",Object(u.jsx)("input",{onChange:n})]})},d=function(e){var n=e.NewContact,t=e.numberHandler,r=e.nameHandler,c=e.addHandler;return Object(u.jsxs)("form",{children:[Object(u.jsx)("h2",{children:"add a new"}),Object(u.jsxs)("div",{children:["name:",Object(u.jsx)("input",{value:n.name||"",onChange:r})]}),Object(u.jsxs)("div",{children:["number:",Object(u.jsx)("input",{value:n.number||"",onChange:t})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",onClick:c,children:"add"})})]})},s=function(e){var n=e.NamesToShow,t=e.deleteContact;return Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"Numbers"}),Object(u.jsx)("ul",{children:n.map((function(e){return Object(u.jsxs)("li",{className:"note",children:[e.name," ",e.number,Object(u.jsx)("button",{onClick:function(){return t(e.id)},children:"delete"})]},e.id)}))})]})},l=t(4),j=t.n(l),b="/api/persons",f={getAll:function(){return j.a.get(b).then((function(e){return e.data}))},add:function(e){return j.a.post(b,e).then((function(e){return e.data}))},remove:function(e){return j.a.delete(b+"/".concat(e)).then((function(e){return e}))},update:function(e,n){return j.a.put(b+"/".concat(e),n).then((function(e){return e.data}))}},m=function(e){var n=e.message,t={color:e.color};return null===n?null:Object(u.jsx)("div",{style:t,className:"error",children:n})},h=function(){var e=Object(o.useState)([]),n=Object(a.a)(e,2),t=n[0],r=n[1];Object(o.useEffect)((function(){f.getAll().then((function(e){r(e)}))}),[]);var c=Object(o.useState)([]),l=Object(a.a)(c,2),j=l[0],b=l[1],h=Object(o.useState)({errorMessage:null,color:null}),O=Object(a.a)(h,2),v=O[0],p=O[1],x=Object(o.useState)(!1),g=Object(a.a)(x,2),w=g[0],C=g[1],N=Object(o.useState)({newName:"",newNuber:""}),S=Object(a.a)(N,2),k=S[0],H=S[1],y=function(e,n){p({errorMessage:e,color:n?"red":"green"}),setTimeout((function(){p({errorMessage:null,color:null})}),5e3)},M=w?j:t;return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(m,{message:v.errorMessage,color:v.color}),Object(u.jsx)(i,{handler:function(e){var n=e.target.value;if(n){var r=t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())}));C(!0),b(r)}else C(!1)}}),Object(u.jsx)(d,{NewContact:k,nameHandler:function(e){H({name:e.target.value,number:k.number})},numberHandler:function(e){H({name:k.name,number:e.target.value})},addHandler:function(e){e.preventDefault();var n=t.find((function(e){return e.name===k.name}));n?function(e){window.confirm("".concat(k.name," is already added to phonebook, replace the old number with the new one ?"))&&f.update(e.id,k).then((function(n){p("Changed ".concat(k.name)),r(t.map((function(t){return t.id===e.id?n:t}))),y("changed ".concat(k.name),!1),H({name:"",number:""})})).catch((function(e){return y(e.response.data.error,!0)}))}(n):f.add(k).then((function(e){r(t.concat(e)),y("Added ".concat(k.name),!1),H({name:"",number:""})})).catch((function(e){y(e.response.data.error,!0)}))}}),Object(u.jsx)(s,{deleteContact:function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Delete contact ".concat(n.name," ?"))&&(f.remove(e).then((function(e){y("Deleted ".concat(n.name),!1)})).catch((function(e){y("Information of ".concat(n.name," has already been removed"),!0)})),r(t.filter((function(n){return n.id!==e}))))},NamesToShow:M})]})};t(38);c.a.render(Object(u.jsx)(h,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.f333fa16.chunk.js.map